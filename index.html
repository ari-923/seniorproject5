<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blueprint Flooring Estimator</title>
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <h1>Blueprint Flooring Estimator (Rect / Circle / Triangle)</h1>

  <ol>
    <li>Upload a blueprint image (PNG/JPG).</li>
    <li>Choose a shape mode: <b>Rectangle</b> (drag), <b>Circle</b> (drag radius), <b>Triangle</b> (click 3 points).</li>
    <li>Enter real measurements in <b>feet</b> and add a label like <b>Kitchen</b>.</li>
  </ol>

  <div class="layout">
    <div class="left">
      <div class="toolbar">
        <input id="fileInput" type="file" accept="image/png,image/jpeg" />
        <label for="shapeSelect"><b>Shape:</b></label>
        <select id="shapeSelect">
          <option value="rect">Rectangle (drag)</option>
          <option value="circle">Circle (drag radius)</option>
          <option value="tri">Triangle (click 3 points)</option>
        </select>

        <button id="undoBtn" type="button">Undo Last</button>
        <button id="clearBtn" type="button">Clear All</button>
      </div>

      <div id="status" class="status">Status: Upload an image to begin.</div>

      <div class="canvasWrap">
        <!-- IMPORTANT: keep this ID exactly -->
        <canvas id="canvas"></canvas>
      </div>

      <div class="tip">Triangle tip: click 3 corners, then youâ€™ll be asked for real base + height (ft).</div>
    </div>

    <div class="right">
      <div class="card">
        <h2>Total</h2>
        <div class="totalLine">
          <div><b id="totalOut">0.00</b> sq ft</div>
          <div>Selections saved: <b id="countOut">0</b></div>
        </div>

        <!-- IMPORTANT: keep this ID exactly -->
        <div id="selectionsList" class="selectionsList"></div>
      </div>

      <!-- Chat UI -->
      <button id="chatFab" class="chatFab" aria-label="Open AI Helper">ðŸ’¬</button>

      <section id="chatPanel" class="chatPanel" aria-hidden="true">
        <header class="chatHeader">
          <div>
            <div class="chatTitle">AI Helper</div>
            <div class="chatSubtitle">Totals â€¢ Waste % â€¢ Cost estimates</div>
          </div>
          <button id="chatClose" class="chatClose" aria-label="Close">âœ•</button>
        </header>

        <div id="chatLog" class="chatLog"></div>

        <form id="chatForm" class="chatForm">
          <input id="chatInput" type="text" placeholder='Try: "Add 10% waste to my total"' autocomplete="off" />
          <button id="chatSend" type="submit">Send</button>
        </form>
      </section>
    </div>
  </div>

  <!-- Scripts: app.js FIRST, then chatbot.js -->
  <script src="./app.js" defer></script>
  <script src="./chatbot.js" defer></script>
</body>
</html>
